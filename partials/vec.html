

<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<link rel="stylesheet" href="assets/css/vectorcalcstyle.css">

<section id="sectionPortfolio">
<div class="container">


    <div class="panel panel-default">
        <div class="panel-body">
            <h1 class = "col-sm-offset-4">Vector Calculator</h1>
        </div>
    </div>

    <ul id="myTab" class="nav nav-pills nav-justified">
        <li class="active"><a href="#home" data-toggle="tab">Calculator</a></li>
        <li><a href="#profile" data-toggle="tab">Information</a></li>
    </ul>

    <div class = "solidline"></div>

    <div id="myTabContent" class="tab-content">


        <div class="tab-pane fade in active" id="home">


            <div class="form-group">
                <label> Please select one type of input:</label><br/><br/>
                <label for="chkEachVect">
                    <input type="radio" class = "radio1" id="singleVect" name="inputvector" value="chk" checked ="checked" />
                    Vector Values for 'X'
                </label>
                <label for="chkEachVect">
                    <input type="radio"  class = "radio1" id="minSpMax" name="inputvector" value="chk2" />
                    3-tuple (Minimum Number, Spacing, Maximum Number)
                </label>

                <label for="chkEachVect">
                    <input type="radio"  class = "radio1" id="minSpTot"  name="inputvector" value="chk3" />
                    3-tuple (Minimum Number, Spacing, Number of elements)
                </label>
            </div>


            <hr />

            <div id="eachVector" class="hideData">
                <div class="form-group">
                    <label>Enter the values for the vector 'X': </label> (Use space as a seperator)<br/>
                    <input type="text" class="col-xs-5" id="eachVectorString" name ="eachVectorString">
                    <br/>
                </div>

                <div>
                    <label id= "singleInputVectorErr" class="hideData" >Please enter valid numbers</label> <br/><br/>
                </div>

            </div>

            <div id="eachVector2" class="hideData">
                <label>Enter the values for 3-tuple:</label>  <br/><br/>

                <label>
                    Minimum Number <br/>
                    <input type="text" id="minSpacingMinInput" />
                </label>

                <label>
                    Spacing<br/>
                    <input type="text" id="minSpacingSpacInput" />
                </label>

                <label>
                    Maximum Number<br/>
                    <input type="text" id="minSpacingMaxInput" />
                </label>

                <br/><br/>

                <!--<button type="button" class="btn btn-primary btn-sm" id="generateVector">Generate</button> <br/>-->
                <label   id= "lblVectorErr" class="hideData" >Max cannot be less than or equal to Min</label> <br/><br/>
                <label   id= "lblVectorErr2" class="hideData" >Max cannot be less than or equal to Spacing</label><br/><br/>
                <label   id= "lblVectorErr3" class="hideData" >Please enter valid numbers</label><br/><br/>
                <label   id= "lblVectorErr4" class="hideData" >This combination of data is not valid</label>


            </div>

            <div id="eachVector3" class="hideData">
                <label>Enter the values for 3-tuple:</label>  <br/><br/>

                <label>
                    Minimum Number <br/>
                    <input type="text" id="numSpacingMinInput" />
                </label>

                <label>
                    Spacing<br/>
                    <input type="text" id="numSpacingSpacInput" />
                </label>

                <label>
                    Number of Elements<br/>
                    <input type="text" id="numSpacingNumInput" />
                </label>

                <br/><br/>

                <label   id= "lblNumVectorErr" class="hideData" >Number of elements should be greater than zero</label> <br/><br/>
                <label   id= "lblNumVectorErr3" class="hideData" >Please enter valid numbers</label>
            </div>

            <br/>
            <br/>





            <div class = "solidline">  </div>

            <div class="row">
                <div class="col-xs-9">
                    <label> Select operations to be performed on the input vector X:</label>(Please enter formula interms of X only)<br/>

                    <button type="button" class="btn btn-primary btn-sm" name="plus" id="plus" value="+" >+</button>
                    <button type="button" class="btn btn-primary btn-sm" name="minus" id="minus"value="-">-</button>
                    <button type="button" class="btn btn-primary btn-sm" name="multiply" id="multiply" value="*">*</button>
                    <button type="button" class="btn btn-primary btn-sm" name="divide" id="divide" value="/">/</button>
                    <button type="button" class="btn btn-primary btn-sm" name="sqrt" id="sqrt" value="sqrt( )">sqrt</button>
                    <button type="button" class="btn btn-primary btn-sm" name="pow" id="pow" value="pow( )">pow</button>
                    <button type="button" class="btn btn-primary btn-sm" name="percentage" id="percentage" value="%">%</button>
                    <button type="button" class="btn btn-primary btn-sm" name="leftbrace" id="leftbrace" value="(">(</button>
                    <button type="button" class="btn btn-primary btn-sm" name="rightbrace" id="rightbrace" value=")">)</button>
                    <button type="button" class="btn btn-primary btn-sm" name="ceil" id="ceil" value="ceil( )">ceil</button>
                    <button type="button" class="btn btn-primary btn-sm" name="floor" id="floor" value="floor( )">floor</button>
                    <button type="button" class="btn btn-primary btn-sm" name="round" id="round" value="round( )">round</button>
                    <button type="button" class="btn btn-primary btn-sm" name="max" id="max" value="max( )">max</button>
                    <button type="button" class="btn btn-primary btn-sm" name="min" id="min" value="min( )">min</button>
                    <button type="button" class="btn btn-primary btn-sm" name="abs" id="abs" value="abs( )">abs</button>

                    <!--ceil, floor, max, min , abs, round-->
                    <br/><br/>

                </div>
            </div>

            <div class="row">
                <div class="col-xs-7"> <!-- left margin is added by default)-->
                    <textarea class="form-control" id="formulaText" name = "formulaText" rows="2" ></textarea>
                    <br/>
                </div>


                <br/><br/>

                <div class="col-xs-7">
                    <div class="rightalign">
                        <button type="button" class="btn btn-primary btn-sm" id="clearFormula">Clear</button>
                        <button type="button" class="btn btn-primary btn-sm" id="calculateResult">Calculate Result</button>
                    </div>
                </div>

                <br/>
                <div class="col-xs-7">
                    <label   id= "formulaError" class="hideData" >Please enter valid formula</label>
                    <br/>
                    <label   id= "formulaErrorX" class="hideData" >Please enter formula in terms of X</label>
                </div>
            </div>



            <br/><br/>

            <label id= "lblBracesError" class="hideData" >Paranthesis is not matching</label>

            <br/>


            <!--Results-->

            <div class = "solidline">  </div>

            <div class="resultsalign">

                <div class="tablealign">
                    <table class="table table-striped" id="table_div"  >
                    </table>
                    <div id="dynamictable" class="hideData" ></div>
                </div>
            </div>

            <div class="resultsalign">
                <!--Right-->
                <div id="columnchart_material" class="graphalign"></div>
            </div>




        </div> <!--Home Div-->

        <div class="tab-pane fade" id="profile">
            <h3>Additional Information and Assumptions</h3>

            <ul>
                <li>The input vector is represented by X and can be entered in three ways</li>
                <br/>
                <ol>
                    <li> Each individual element of X can be entered with spaces by choosing the option - Vector Values for 'X'</li>
                    <li> Vector can be dynamically created through 3-tuple (Minimum Number, Spacing, Maximum Number) </li>
                    <li> Vector can be dynamically created through 3-tuple (Minimum Number, Spacing, Number of elements)</li>
                </ol>
                <br/>
                <br/>
                <li> After the Vector data is validated, a customized formula can be created only in terms of X (Vector entered by the user) </li>
                <br/>

                <li> Formula can be created either through Keyboard or by functions provided through buttons  </li>
                <br/>

                <li> Once the Formula is composed, click on Calculate Result button - Results with scroll along graph will be displayed on the same page .</li>
            </ul>

        </div>

    </div><!-- tab div group-->
</div> <!--container div-->

    <script>

        /*global declaration*/
        var myArrayglobal        = new Array(); /* Array used to store the data entered manually - values for the vector 'X' */
        var vectorArray          = new Array(); /* Array used to store the data entered - 3-tuple*/

        var X;
        var x;
        google.charts.load('current', {'packages':['bar']}); /*google chart is loaded only once */

        var vectorArrayFinal      = new Array();
        $(document).ready(function(){

            $("#calculateResult").prop("disabled",true);
            $('#myTab a').click(function (e) {
                console.log('clicked '+this);
                if($(this).parent('li').hasClass('active')){
                    var target_pane=$(this).attr('href');
                    console.log('pane: '+target_pane);
                    $( target_pane ).toggle( !$( target_pane ).is(":visible") );
                }
            });



            /*logic to handle radio buttons */
            $(function () {

                /* Radio button option for entering each individual element of X is selected by default*/
                if ($("#singleVect").is(":checked")) {
                    $("#eachVector").show();
                    $("#eachVector2").hide();
                    $("#eachVector3").hide();
                }
                /* On-click function to display corresponding user inputs based on the type selected*/
                $("input[name='inputvector']").click(function () {
                    if ($("#singleVect").is(":checked")) {
                        $("#eachVector").show();
                        $("#eachVector2").hide();
                        $("#eachVector3").hide();
                    } else if ($("#minSpMax").is(":checked")) {
                        $("#eachVector2").show();
                        $("#eachVector").hide();
                        $("#eachVector3").hide();
                    } else if ($("#minSpTot").is(":checked")) {
                        $("#eachVector3").show();
                        $("#eachVector2").hide();
                        $("#eachVector").hide();
                    }
                });

            });

            /* Filter for single input vector where each individual element of X is entered*/
            /* only numbers, space, backspace, delete, tab,escape and tab are allowed*/
            $("#eachVectorString").keydown(function (e) {
                /* Allow: space, backspace, delete, tab, escape, enter .*/
                if ($.inArray(e.keyCode, [32,46, 8, 9, 27, 13, 110, 189,190]) !== -1 ||
                        /* Allow: Ctrl+A, Command+A */
                    (e.keyCode == 65 && ( e.ctrlKey === true || e.metaKey === true ) ) ||
                        /* Allow: home, end, left, right, down, up */
                    (e.keyCode >= 35 && e.keyCode <= 40)) {
                    return;
                }
                /* Ensure that it is a number and stop the keypress*/
                if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {
                    e.preventDefault();
                }
            });

            /*Filter for 3-tuple input fileds */
            /* only numbers, backspace, delete, tab,escape and tab are allowed*/
            $("#minSpacingMinInput,#minSpacingSpacInput,#minSpacingMaxInput,#numSpacingMinInput,#numSpacingSpacInput").keydown(function (e) {
                /* Allow: backspace, delete, tab, escape, enter .*/
                if ($.inArray(e.keyCode, [46, 8, 9, 27, 13, 110, 189,190]) !== -1 ||
                        /* Allow: Ctrl+A, Command+A */
                    (e.keyCode == 65 && ( e.ctrlKey === true || e.metaKey === true ) ) ||
                        /* Allow: home, end, left, right, down, up */
                    (e.keyCode >= 35 && e.keyCode <= 40)) {
                    return;
                }
                /* Ensure that it is a number and stop the keypress*/
                if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {
                    e.preventDefault();
                }
            });

            /*Filter for Number of elements field in  3-tuple (Minimum Number, Spacing, Number of elements) */
            /*filter negative numbers*/
            $("#numSpacingNumInput").keydown(function (e) {
                /* Allow:  backspace, delete, tab, escape, enter and .*/
                if ($.inArray(e.keyCode, [46,8, 9, 27, 13]) !== -1 ||
                        /* Allow: Ctrl+A, Command+A*/
                    (e.keyCode == 65 && ( e.ctrlKey === true || e.metaKey === true ) ) ||
                        /* Allow: home, end, left, right, down, up */
                    (e.keyCode >= 35 && e.keyCode <= 40)) {
                    return;
                }
                /* Ensure that it is a number and stop the keypress*/
                if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {
                    e.preventDefault();
                }
            });

            /* Logic to handle entered vector Values for 'X'*/
            /* The entered values with spaces is validated and placed into an array for
             for further processing, if the data is valid*/
            $("#eachVectorString").change(function () {
                var myArray = $.trim($('#eachVectorString').val()).split(" ");

                //alert("myArray after split" + myArray);
                var checkFlag;
                var sucessCnt=0;
                var errorFound;
                myArrayglobal =new Array();

                for(var i=0; i<myArray.length; i++) {
                    checkFlag = isNaN($.trim(myArray[i]));//isNaN(myArray[i]);


                    if($.trim(myArray[i]) !==''){
                        if(checkFlag === true) {
                            errorFound = 'Y';
                        }else{
                            //alert("false");
                            myArrayglobal[sucessCnt] = +myArray[i];// myArray[i] = +myArray[i];
                            sucessCnt = sucessCnt + 1;
                        }
                    }
                }

                if( errorFound == 'Y'){
                    $("#calculateResult").prop("disabled",true);
                    $("#singleInputVectorErr").show();
                    $("#eachVectorString").css("border-color","red");
                } else{
                    $("#calculateResult").prop("disabled",false);
                    $("#singleInputVectorErr").hide();
                    $("#eachVectorString").css("border-color","");
                }


            });

            /* When the Calculate Result button is clicked based on the radio button option selected
             the corresponding Array data captured after validation, is moved into global arrays for
             calculating the results based on the formula*/
            $("#calculateResult").click(function () {
                //alert("click global");
                //alert(myArrayglobal);
                var vectorArray1;
                if ($("#singleVect").prop("checked")) {
                    if ($.trim($('#eachVectorString').val()) !='') {
                        vectorArrayFinal = myArrayglobal;
                    }
                }


                if ($("#minSpMax").prop("checked")) {
                    if (($.trim($('#minSpacingMaxInput').val()) !='')&& ($.trim($('#minSpacingMaxInput').val()) !== '')&& ($.trim($('#minSpacingSpacInput').val()) !== '')) {
                        vectorArrayFinal = vectorArray;
                        //alert(vectorArrayFinal +"inside 3 tuple array ");
                    }
                }

                if ($("#minSpTot").prop("checked")) {
                    if (($.trim($('#numSpacingMinInput').val()) !='')&& ($.trim($('#numSpacingNumInput').val()) !== '')&& ($.trim($('#numSpacingSpacInput').val()) !== '')) {
                        vectorArrayFinal = vectorArray;
                        //alert(vectorArrayFinal +"inside 3 tuple array ");
                    }
                }


            });

            /* Logic to insert formula/operations based on the buttons clicked(option selected)
             by the user in the formula text box*/
            $('#formulaText').val("X");
            $('#plus,#minus,#multiply,#divide,#sqrt,#pow,#percentage,#leftbrace,#rightbrace,#ceil,#floor,#max,#min,#abs,#round').click(function(){
                var v = $(this).val();
                //$('#formulaText').val($('#formulaText').val() + v);
                typeInTextarea($("#formulaText"), v)
                return false

            });

            function typeInTextarea(el, newText) {
                var start = el.prop("selectionStart")
                var end = el.prop("selectionEnd")
                var text = el.val()
                var before = text.substring(0, start)
                var after  = text.substring(end, text.length)
                el.val(before + newText + after)
                el[0].selectionStart = el[0].selectionEnd = start + newText.length
                el.focus()
                return false
            }

            $('#clearFormula').click(function(){
                var v = $(this).val();
                $('#formulaText').val("X");
            });








            /* Logic for the input numbers entered for 3-tuple (Minimum Number, Spacing, Maximum Number)
             The data validations are performed for each input text field and corresponding operations are performed
             During validations the messages are displayed on the html page - suggestions to the user
             CSS styles are used by highlighting the fields with error*/
            $('#minSpacingMaxInput,#minSpacingMinInput,#minSpacingSpacInput').change(function () {

                /*reset for change in 3-tupple inputs*/
                $("#minSpacingMinInput").css("border-color","");
                $("#minSpacingSpacInput").css("border-color","");
                $("#minSpacingMaxInput").css("border-color","");
                $("#lblVectorErr").hide();
                $("#lblVectorErr2").hide();
                $("#lblVectorErr4").hide();


                var checkFlagMin;
                var checkFlagSpac;
                var checkFlagMax;
                var validFlagSpac ='Y';

                if ($("#minSpacingMinInput").val() !== '') {
                    checkFlagMin = isNaN(parseFloat($("#minSpacingMinInput").val()));
                }

                if ($("#minSpacingSpacInput").val() !== '') {
                    checkFlagSpac = isNaN(parseFloat($("#minSpacingSpacInput").val()));
                }

                if ($("#minSpacingMaxInput").val() !== '') {
                    checkFlagMax = isNaN(parseFloat($("#minSpacingMaxInput").val()));
                }


                if( (checkFlagMin === true)  || (checkFlagSpac === true) || (checkFlagMax === true) ) {
                    //disable Calculate Result Button and diplay an error message.
                    $("#lblVectorErr3").show();
                    $("#calculateResult").prop("disabled",true);
                    validFlagSpac = 'N';
                } else {
                    $("#lblVectorErr3").hide();
                    $("#calculateResult").prop("disabled",false);
                    //validFlagSpac == 'Y';
                }

                var min = parseFloat($("#minSpacingMinInput").val());
                var spac = parseFloat($("#minSpacingSpacInput").val());
                var max =  parseFloat($("#minSpacingMaxInput").val());



                if ((min >= max) && ($.trim($('#minSpacingMaxInput').val()) !== '')&& ($.trim($('#minSpacingMinInput').val()) !== '')) {
                    $("#lblVectorErr").show();
                    $(this).focus();
                    $(this).css("border-color","red");
                    validFlagSpac = 'N';
                }
                else {
                    $("#lblVectorErr").hide();
                    $(this).css("border-color","");
                }

                //lblVectorErr4

                if (($.trim($('#minSpacingMaxInput').val()) !== '')&& ($.trim($('#minSpacingMinInput').val()) !== '')&& ($.trim($('#minSpacingSpacInput').val()) !== '')) {
                    if((min<= 0) && (spac<= 0) && (max>= 0)) {
                        $("#lblVectorErr4").show();
                        $(this).css("border-color","red");
                        validFlagSpac = 'N';
                    }else{
                        $("#lblVectorErr4").hide();
                        $(this).css("border-color","");
                    }
                }

                if ((spac >= max) && ($.trim($('#minSpacingMaxInput').val()) !== '') && ($.trim($('#minSpacingSpacInput').val()) !== '')) {

                    $("#lblVectorErr2").show();
                    $(this).focus();
                    $(this).css("border-color","red");
                    validFlagSpac = 'N';
                }
                else {
                    $("#lblVectorErr2").hide();
                    $(this).css("border-color","");
                }

                /*resetting*/
                var text = "";
                var i = min;
                var j = 0;
                vectorArray = new Array();


                if((validFlagSpac === 'Y')&& ($.trim($('#minSpacingMinInput').val()) !== '') && ($.trim($('#minSpacingSpacInput').val()) !== '') && ($.trim($('#minSpacingMaxInput').val()) !== '') ){

                    while(i<=max){
                        vectorArray[j] = i;
                        j++;
                        i=i+spac;
                    }



                } else {

                    $("#calculateResult").prop("disabled",true);
                }

            });



            /* Logic for the input numbers entered for 3-tuple (Minimum Number, Spacing, Number of elements)
             The data validations are performed for each input text field and corresponding operations are performed
             During validations the messages are displayed on the html page - suggestions to the user
             CSS styles are used by highlighting the fields with error*/

            $('#numSpacingMinInput,#numSpacingSpacInput,#numSpacingNumInput').change(function () {

                /*reset for change in 3-tupple inputs*/
                $("#numSpacingMinInput").css("border-color","");
                $("#numSpacingSpacInput").css("border-color","");
                $("#numSpacingNumInput").css("border-color","");
                $("#lblNumVectorErr").hide();
                $("#lblVectorErr").hide();
                $("#lblVectorErr2").hide();



                var checkFlagNumMin;
                var checkFlagNumSpac;
                var checkFlagNumMax;
                var validFlagNumSpac ='Y';

                if ($("#numSpacingMinInput").val() !== '') {
                    checkFlagNumMin = isNaN(parseFloat($("#numSpacingMinInput").val()));
                }

                if ($("#numSpacingSpacInput").val() !== '') {
                    checkFlagNumSpac = isNaN(parseFloat($("#numSpacingSpacInput").val()));
                }

                if ($("#numSpacingNumInput").val() !== '') {
                    checkFlagNumMax = isNaN(parseFloat($("#numSpacingNumInput").val()));
                }


                if( (checkFlagNumMin === true)  || (checkFlagNumSpac === true) || (checkFlagNumMax === true) ) {
                    //disable Calculate Result Button and diplay an error message.
                    $("#lblNumVectorErr3").show();
                    $("#calculateResult").prop("disabled",true);
                    validFlagNumSpac = 'N';
                } else {
                    $("#lblNumVectorErr3").hide();
                    $("#calculateResult").prop("disabled",false);
                    //validFlagNumSpac == 'Y';
                }

                var min              = parseFloat($("#numSpacingMinInput").val());
                var spac             = parseFloat($("#numSpacingSpacInput").val());
                var numberofElements =  parseFloat($("#numSpacingNumInput").val());

                if((validFlagNumSpac == 'Y') && ($.trim($('#numSpacingMinInput').val()) !== '') && ($.trim($('#numSpacingSpacInput').val()) !== '') && ($.trim($('#numSpacingNumInput').val()) !== '') ){


                    var text = "";
                    var i;
                    var j=min;

                    vectorArray = new Array();

                    for(i=0;i<numberofElements;i++){
                        vectorArray[i] = j;

                        j=j+spac;
                    }


                }
            });

        });



        $(function(){
            /*
             Function to calculate the result based on the formula selected
             and the vector values. The formula entered is also validated and
             the error messages messages will be displayed accordingly
             */
            $("#calculateResult").click(function () {



                /* stackto hold braces*/
                var stack = [];
                //alert("stack");

                /* logic to check if the braces are balanced */
                var input1 = "'" + String($("#formulaText").val()) + "'";


                if(processExp(input1)) {
                    $("#lblBracesError").hide();
                }else{
                    $("#lblBracesError").show();
                }


                function processExp(exp)
                {
                    for(var i =0;i<exp.length;i++)
                    {
                        if(exp[i] == '(' || exp[i] == '{' || exp[i] == '[')
                            stack.push(exp[i]);
                        else if(exp[i] == ')' || exp[i] == '}' || exp[i] == ']')
                        {
                            if(stack.length==0 || !isMatchingPair(stack[stack.length-1],exp[i]))
                                return false;
                            else
                                stack.pop();
                        }
                    }
                    if(stack.length==0)
                        return true;
                    else
                        return false;
                }

                function isMatchingPair(ch1,ch2)
                {
                    if(ch1 == '(' && ch2 == ')')
                        return true;
                    else if(ch1 == '{' && ch2 == '}')
                        return true;
                    else if(ch1 == '[' && ch2 == ']')
                        return true;
                    else
                        return false;
                }





                function getAllMethods(object) {
                    return Object.getOwnPropertyNames(object).filter(function(property) {
                        return typeof object[property] == 'function';
                    });
                }

                //alert(getAllMethods(Math));

                var mathArray = new Array();
                //var texta;

                mathArray = getAllMethods(Math);






                var str1 = "'" + String($("#formulaText").val()) + "'";

                //alert(str1 + "str1 before");

                for(l=0;l<mathArray.length;l++){
                    if(str1.toLowerCase().indexOf(mathArray[l]) != -1){
                        var oldVar = mathArray[l];

                        var newVar = "Math."+ mathArray[l];


                        str1.replace(/['"]+/g, '');



                        var regex = new RegExp(mathArray[l], 'g');

                        str1 = str1.replace(regex, newVar);



                    }
                }

                //alert(str1 + "str1 after");

                var str2 = "";
                var rest;
                var errorCaught='';
                $("#formulaError").hide();
                $("#formulaText").css("border-color","");

                var finalResultArray = new Array();
                var n= 0;
                for(m=0;m<vectorArrayFinal.length;m++){
                    //alert(vectorArrayFinal[m] + "loopcount");

                    X = vectorArrayFinal[m];

                    var str3 = str1;

                    try {
                        var finalResult = eval(str3.replace(/['"]+/g, '')); //str2

                        var checkValidNbr = isNaN(eval(str3.replace(/['"]+/g, '')));

                        if(checkValidNbr=== true){
                            errorCaught='Y';
                            $("#formulaError").show();
                            $("#formulaText").css("border-color","red");
                            break;
                        }
                    } catch(err) {

                        errorCaught='Y'
                        //formulaError
                        $("#formulaError").show();
                        $("#formulaText").css("border-color","red");
                        break;
                    }


                    finalResultArray[m] = finalResult;

                }

                /* Logic to create Table and graph with results */

                $("#table_div").empty();
                if (errorCaught=='')	{

                    $("#table_div").append("<tr><th>Input Vector</th><th>Output Vector</th></tr>");
                    for(m=0;m<vectorArrayFinal.length;m++){
                        $("#table_div").append("<tr><td>"+ vectorArrayFinal[m]+"</td><td>"+finalResultArray[m]+"</td></tr>");
                    }
                    $("#table_div").append("</table>");

                    google.charts.setOnLoadCallback(drawChart);
                    function drawChart() {

                        var counterArray = new Array();

                        for(i=0;i<vectorArrayFinal.length;i++){
                            counterArray[i] = i+1;
                        }

                        var count = counterArray;
                        var input = vectorArrayFinal;
                        var output = finalResultArray;


                        var data = new google.visualization.DataTable();
                        data.addColumn('number', 'count');
                        data.addColumn('number', 'input');
                        data.addColumn('number', 'output');

                        for(i = 0; i < count.length; i++){
                            data.addRow([count[i], input[i],output[i]]);
                        }

                        var options = {
                            chart: {
                                title: 'Comparision of Vectors',

                            },
                            width: 600,
                            height: 500,

                        };

                        var chart = new google.charts.Bar(document.getElementById('columnchart_material')); //Bar Line
                        chart.draw(data, options);
                    }



                    vectorArrayFinal = new Array();
                }

            });	//when the user clicks on Calculate Result button



        });


    </script>

</section>